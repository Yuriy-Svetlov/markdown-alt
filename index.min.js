"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var markdownAlt=function(){function c(){_classCallCheck(this,c)}return _createClass(c,null,[{key:"async_getHTML",value:function(e,t){void 0!==this.getHTML__Timer&&clearTimeout(this.getHTML__Timer),this.getHTML__Timer=setTimeout(function(){t(c.getHTML(e))},1e3)}},{key:"getHTML",value:function(e){return this.lock__PRE_CODE&&(e=this.to_HTML__set_pre_code__Preparation(e)),this.lock__P&&(e=this.to_HTML__set_p(e)),e}},{key:"to_HTML__set_p",value:function(e){return e.replace(/((?:\n\n+)*)([\s\S]+?)(\n\n+|$)/g,function(e,t,r,n,_,o){return(c.html=c.to_HTML__otherTAGs(r))?t+c.html+n:(c.lock__ESCAPE&&(r=c.escapeHtml(r)),r="<p>"+r+"</p>",c.lock__PARAGRAPH&&(r=c.to_HTML__set_paragraph(r)),c.lock__BR&&(r=c.to_HTML__set_br(r)),c.lock__A&&(r=c.to_HTML__set_a(r)),c.lock__TEXT_BOLD&&(r=c.to_HTML__set_text_bold(r)),c.lock__TEXT_ITALIC&&(r=c.to_HTML__set_text_italic(r)),c.lock__CODE&&(r=c.to_HTML__set_code(r)),t+r+n)})}},{key:"to_HTML__otherTAGs",value:function(e){return this.html="",this.lock__H2&&/^## .+$/.test(e)?this.to_HTML__set_h2(e):this.lock__H3&&/^### .+$/.test(e)?this.to_HTML__set_h3(e):this.lock__HR&&/^____+$/.test(e)?this.to_HTML__set_hr():this.lock__QUOTE&&/^> [\s\S]+/.test(e)?this.to_HTML__set_quote(e):this.lock__PRE_CODE&&/^```\n[\s\S]+?\n```$/.test(e)?this.to_HTML__set_pre_code(e):this.lock__LIST_UL&&/^- [\s\S]+/.test(e)?this.getList__ul_li(e):this.lock__LIST_OL&&/[0-9]+\. [\s\S]+/.test(e)?this.getList__ol_li(e):this.lock__IMG&&/^!\[.*?\]\(.+? ".*?"(\[source=.+?\])?\)$/.test(e)?this.to_HTML__IMG(e):this.lock__GFYCAT&&/^!\|GFYCAT\|\(.+? "\[autoplay=(1|0)\]\[quality=(1|0)\]\[speed=[0-9]\.[0-9]+?\]\[controls=(1|0)\]"\)$/.test(e)?this.to_HTML__GFYCAT(e):this.lock__YOUTUBE&&/^!\|YOUTUBE\|\(.+?\)$/.test(e)?this.to_HTML__YOUTUBE(e):!(!this.lock__VIMEO||!/^!\|VIMEO\|\(.+?\)$/.test(e))&&this.to_HTML__VIMEO(e)}},{key:"to_HTML__set_paragraph",value:function(e){return e.replace(/((?:\n\\)+)\n/g,function(e,t,r,n){return t=t.replace(/\n\\/g,"<br>")})}},{key:"to_HTML__set_a",value:function(e){return e.replace(/\[(.+?)\]\(([^\s]+?)\)/g,function(e,t,r,n,_){return c.lock__ESCAPE&&(t=c.escapeHtml(t),r=c.reescapeHtml(r),r=c.safeAttrHtml(r)),c.layout__A(t,r)})}},{key:"layout__A",value:function(e,t){return'<a rel="noopener noreferrer nofollow" target="_blank" href="'+t+'">'+e+"</a>"}},{key:"to_HTML__set_br",value:function(e){return e.replace(/\n/g,function(e,t,r,n){return"<br>"})}},{key:"to_HTML__set_text_bold",value:function(e){return e.replace(/\*\*([\s\S]+?)\*\*/g,function(e,t,r,n){return"<strong>"+t+"</strong>"})}},{key:"to_HTML__set_text_italic",value:function(e){return e.replace(/\*([\s\S]+?)\*/g,function(e,t,r,n){return"<em>"+t+"</em>"})}},{key:"to_HTML__set_code",value:function(e){return e.replace(/(?:`|&#x60;)([\s\S]+?)(?:`|&#x60;)/g,function(e,t,r,n){return c.layout__CODE(t)})}},{key:"layout__CODE",value:function(e){return"<code>"+e+"</code>"}},{key:"to_HTML__set_hr",value:function(){return c.layout__HR()}},{key:"layout__HR",value:function(){return"<hr>"}},{key:"to_HTML__set_h2",value:function(e){return e.replace(/## (.+)/,function(e,t,r,n){return c.lock__ESCAPE&&(t=c.escapeHtml(t)),"<h2>"+t+"</h2>"})}},{key:"to_HTML__set_h3",value:function(e){return e.replace(/### (.+)/,function(e,t,r,n){return c.lock__ESCAPE&&(t=c.escapeHtml(t)),"<h3>"+t+"</h3>"})}},{key:"to_HTML__set_pre_code__Preparation",value:function(e){return e.replace(/((?:\n\n|^)```\n)([\s\S]+?)(\n```(?:\n\n|$))/g,function(e,t,r,n,_,o){return r=c.escapeHtml(r),t+(r=(r=(r=c.to_HTML__set_br(r)).replace(/ /g,"&emsp;")).replace(/\t/g,"&emsp;&emsp;&emsp;&emsp;"))+n})}},{key:"to_HTML__set_pre_code",value:function(e){return e.replace(/^```\n([\s\S]+?)\n```$/g,function(e,t,r,n){return c.layout__PRE_CODE(t)})}},{key:"layout__PRE_CODE",value:function(e){return"<pre><code>"+e+"</code></pre>"}},{key:"to_HTML__set_quote",value:function(e){return c.getQuotes(e)}},{key:"getQuotes",value:function(e){var n=[],_=0;("\n"+e).replace(/(\n>+)/g,"\n$1").replace(/(>+ )([\s\S]+?)(\n\n|$)/g,function(e,t,r){return _<t.length?(_=t.length,n.push(r)):n[n.length-1]=n[n.length-1]+" "+r});var o="";return this.to_HTML__set_br(function e(t,r){return o=c.lock__ESCAPE?"<p>"+c.escapeHtml(t[r])+"</p>":"<p>"+t[r]+"</p>",void 0!==t[r+1]?c.layout__QUOTES(o+e(t,r+1)):c.layout__QUOTES(o)}(n,0))}},{key:"layout__QUOTES",value:function(e){return"<blockquote>"+e+"</blockquote>"}},{key:"getList__ul_li",value:function(e){var n,l=[];n=l,e.replace(/( *- [\s\S]+?)(\n|$)/g,function(e,t,r){return n.push(t)});var u=0;function i(e){return c.lock__ESCAPE&&(e=c.escapeHtml(e)),e=function(e){return e.replace(/^ *- ([\s\S]+)/g,"$1")}(e),c.layout__UL_LI(e)}function a(e){return void 0===e?"":e.replace(/^( *)- [\s\S]+?(?:\n|$)/g,"$1")}return c.layout__UL(function e(){for(var t,r="<ul>",n="</ul>",_="",o="";u<=l.length-1;u++){if(void 0===l[u+1])return _=r+_+"<li>"+i(l[u])+"</li>"+n;if(""===o&&(o=a(l[u]).length),o===(t=a(l[u+1]).length))_=_+"<li>"+i(l[u])+"</li>";else{if(!(o<t))return r+_+"<li>"+i(l[u])+"</li>"+n;if(_=_+"<li>"+i(l[u]),u+=1,_=_+e()+"</li>",null==l[u+1]||a(l[u+1]).length!==o)return r+_+n}}return!1}())}},{key:"layout__UL_LI",value:function(e){return e}},{key:"layout__UL",value:function(e){return e}},{key:"getList__ol_li",value:function(e){var n,l=[];n=l,e.replace(/( *[0-9]+\. [\s\S]+?)(\n|$)/g,function(e,t,r){return n.push(t)});var u=0;function i(e){return c.lock__ESCAPE&&(e=c.escapeHtml(e)),e=function(e){return e.replace(/^ *[0-9]+\. ([\s\S]+)/g,"$1")}(e),c.layout__OL_LI(e)}function a(e){return void 0===e?"":e.replace(/^( *)[0-9]+\. [\s\S]+?(?:\n|$)/g,"$1")}return c.layout__OL(function e(){for(var t,r="<ol>",n="</ol>",_="",o="";u<=l.length-1;u++){if(void 0===l[u+1])return _=r+_+"<li>"+i(l[u])+"</li>"+n;if(""===o&&(o=a(l[u]).length),o===(t=a(l[u+1]).length))_=_+"<li>"+i(l[u])+"</li>";else{if(!(o<t))return r+_+"<li>"+i(l[u])+"</li>"+n;if(_=_+"<li>"+i(l[u]),u+=1,_=_+e()+"</li>",null==l[u+1]||a(l[u+1]).length!==o)return r+_+n}}return!1}())}},{key:"layout__OL_LI",value:function(e){return e}},{key:"layout__OL",value:function(e){return e}},{key:"to_HTML__IMG",value:function(e){return e.replace(/!\[(.*?)\]\((.+?) "(.*?)"(?:\[source=(.+?)\])?\)/g,function(e,t,r,n,_,o,l){return c.lock__ESCAPE&&(t=c.escapeHtml(t),t=c.safeAttrHtml(t),r=c.safeAttrHtml(r),n=c.escapeHtml(n),_=c.safeAttrHtml(_)),c.layout__IMG(t,r,n,_)})}},{key:"layout__IMG",value:function(e,t,r,n){return'<img src="'+t+'" alt="'+e+'">'}},{key:"to_HTML__GFYCAT",value:function(e){return e.replace(/!\|GFYCAT\|\((.+?) "\[autoplay=(1|0)\]\[quality=(1|0)\]\[speed=([0-9]\.[0-9]+?)\]\[controls=(1|0)\]"\)/g,function(e,t,r,n,_,o,l,u){return c.lock__ESCAPE&&(t=c.safeAttrHtml(t)),c.layout__GFYCAT(t,r,n,_,o)})}},{key:"layout__GFYCAT",value:function(e,t,r,n,_){return'<div><iframe src="'+(e=(e=e.replace(/^(https:\/\/gfycat\.com\/)(.*)/g,"$1ifr/$2"))+"?autoplay="+t+"&hd="+r+"&speed="+n+"&controls="+_)+'" style="width: 100%; height: 100%; border: 0px;" width="100" height="100" allowfullscreen></iframe></div>'}},{key:"to_HTML__YOUTUBE",value:function(e){return e.replace(/!\|YOUTUBE\|\((.+?)\)/g,function(e,t,r,n){return c.lock__ESCAPE&&(t=c.safeAttrHtml(t)),t=t.replace(/^(.+?youtube\.com\/)watch\?v=([^&]*).*/g,"$1embed/$2"),c.layout__YOUTUBE(t)})}},{key:"layout__YOUTUBE",value:function(e){return'<div style="position: relative; padding-bottom: 56.25%;"><iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0px;" src="'+e+'" scrolling="no" width="100" height="100" allowfullscreen></iframe></div>'}},{key:"to_HTML__VIMEO",value:function(e){return e.replace(/!\|VIMEO\|\((.+?)\)/g,function(e,t,r,n){return c.lock__ESCAPE&&(t=c.safeAttrHtml(t)),t="https://player.vimeo.com/video/"+t.replace(/.+?\/([0-9]+)$/g,"$1")+"?color=ffffff",c.layout__VIMEO(t)})}},{key:"layout__VIMEO",value:function(e){return'<div style="position: relative; padding: 56.25% 0 0 0;"><iframe src="'+e+'" style="position: absolute; top:0; left:0; border: 0px; width: 100%; height: 100%;" allow="autoplay; fullscreen" allowfullscreen></iframe></div>'}},{key:"escapeHtml",value:function(e){return void 0===e?"":String(e).replace(/[&<>"'`=/]/g,function(e){return c.entityMap[e]})}},{key:"reescapeHtml",value:function(e){return void 0===e?"":String(e).replace(/(&amp;|&lt;|&gt;|&quot;|&#39;|&#x2F;|&#x60;|&#x3D;)/g,function(e){return c.reentityMap[e]})}},{key:"safeAttrHtml",value:function(e){return void 0===e?"":e.replace(/["']/g,"")}}]),c}();_defineProperty(markdownAlt,"lock__P",!0),_defineProperty(markdownAlt,"lock__QUOTE",!0),_defineProperty(markdownAlt,"lock__LIST_UL",!0),_defineProperty(markdownAlt,"lock__LIST_OL",!0),_defineProperty(markdownAlt,"lock__PARAGRAPH",!0),_defineProperty(markdownAlt,"lock__HR",!0),_defineProperty(markdownAlt,"lock__BR",!0),_defineProperty(markdownAlt,"lock__TEXT_BOLD",!0),_defineProperty(markdownAlt,"lock__TEXT_ITALIC",!0),_defineProperty(markdownAlt,"lock__CODE",!0),_defineProperty(markdownAlt,"lock__PRE_CODE",!0),_defineProperty(markdownAlt,"lock__H2",!0),_defineProperty(markdownAlt,"lock__H3",!0),_defineProperty(markdownAlt,"lock__A",!0),_defineProperty(markdownAlt,"lock__IMG",!0),_defineProperty(markdownAlt,"lock__GFYCAT",!0),_defineProperty(markdownAlt,"lock__YOUTUBE",!0),_defineProperty(markdownAlt,"lock__VIMEO",!0),_defineProperty(markdownAlt,"lock__ESCAPE",!0),_defineProperty(markdownAlt,"getHTML__Timer",void 0),_defineProperty(markdownAlt,"html",""),_defineProperty(markdownAlt,"entityMap",{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"}),_defineProperty(markdownAlt,"reentityMap",{"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/","&#x60;":"`","&#x3D;":"="}),"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&(module.exports=markdownAlt);